<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Account - Tart</title>
    <link rel="stylesheet" href="css/style.css?v=1.1">
</head>
<body class="account-page">
    <header>
        <a href="/" class="header-text-link header-back-link" aria-label="Back to home">&lt;</a>
        <nav aria-label="Account">
            <a href="#" id="logout-btn" class="header-text-link">Log out</a>
        </nav>
    </header>

    <main>
        <div class="profile-container">
            <section class="profile-header">
                <div class="profile-avatar-container">
                    <img src="/assets/default-avatar.svg" alt="Artist Avatar" class="profile-avatar" id="profile-avatar">
                    <div class="avatar-upload-overlay">
                        <span>Click to change</span>
                    </div>
                    <input type="file" id="avatar-upload" accept="image/*" style="display: none;">
                </div>
                <div class="profile-info">
                    <div class="name-row">
                        <h2 id="artist-name">Artist Name</h2>
                        <button id="notif-bell" class="icon-btn" type="button" aria-label="Notifications" aria-haspopup="true" aria-expanded="false" title="Notifications">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M18 8a6 6 0 10-12 0c0 7-3 7-3 7h18s-3 0-3-7"/>
                                <path d="M13.73 21a2 2 0 01-3.46 0"/>
                            </svg>
                        </button>
                        <div id="notif-panel" class="notif-panel" hidden>
                            <div class="notif-header">Notifications</div>
                            <div id="notif-empty" class="notif-empty">No notifications yet</div>
                            <ul id="notif-list" class="notif-list" role="list"></ul>
                        </div>
                    </div>
                    <p id="artist-region">City, Country</p>
                    <p id="artist-connections">0 Connections</p>
                </div>
                <div class="profile-actions">
                    <a href="/upload.html" class="btn account-action-btn">Upload Artwork</a>
                    <a href="/survey.html" class="btn account-action-btn">Portfolio Website</a>
                    <button id="edit-profile-btn" class="btn account-settings-btn" type="button" aria-label="Settings" title="Settings">
                        <!-- Gear icon for Settings (text hidden on mobile via CSS) -->
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        <span class="settings-text">Settings</span>
                    </button>
                </div>
                <div id="account-published-url" style="display:none; margin-top:8px; font-size:0.95rem;">
                    <a id="account-published-url-link" href="#" target="_blank" rel="noopener">view</a>
                </div>
            </section>

            <div class="section-divider"></div>

            <section class="profile-content">
                <div class="tabs">
                    <button class="tab-link active" onclick="openTab(event, 'gallery')">Gallery</button>
                    <button class="tab-link" onclick="openTab(event, 'collection')">Collection</button>
                </div>

                <div id="gallery" class="tab-content active">
                    <h3>My Artworks</h3>
                    <div id="artist-artworks-container" class="gallery"></div>
                </div>

                <div id="collection" class="tab-content">
                    <div id="artist-collection-container" class="artworks-grid">
                        <!-- Collected artworks will be loaded here -->
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Inline Notification Container -->
    <div id="notice-container" aria-live="polite" aria-atomic="true" style="position:fixed; top:12px; left:50%; transform:translateX(-50%); z-index:1100; display:flex; flex-direction:column; gap:8px; align-items:center; pointer-events:none;"></div>

    <!-- Settings Modal with side panel -->
    <div id="settings-modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:1000; align-items:center; justify-content:center;">
        <div class="settings-dialog" style="background:#fff; padding:0; border-radius:8px; width:92%; max-width:720px; box-shadow:0 10px 30px rgba(0,0,0,0.2); display:flex; min-height:380px; overflow:hidden;">
            <!-- Side navigation -->
            <aside style="width:160px; border-right:1px solid #eee; padding:16px;">
                <h3 style="margin:0 0 12px 0;">Settings</h3>
                <nav style="display:flex; flex-direction:column; gap:6px;">
                    <button type="button" class="settings-nav-item active" data-panel="edit" style="text-align:left; background:none; border:none; padding:8px; border-radius:6px; cursor:pointer;">Edit Profile</button>
                    <button type="button" class="settings-nav-item" data-panel="privacy" style="text-align:left; background:none; border:none; padding:8px; border-radius:6px; cursor:pointer;">Privacy &amp; Security</button>
                </nav>
            </aside>
            <!-- Content area -->
            <section style="flex:1 1 500px; max-width:520px; width:100%; padding:16px; display:flex; flex-direction:column; position:relative; padding-bottom:16px;">
                <!-- Edit Profile panel -->
                <div id="settings-panel-edit" style="display:flex; flex-direction:column; flex:1;">
                    <h3 style="margin-top:0;">Edit Profile</h3>
                    <div style="display:flex; flex-direction:column; gap:10px;">
                        <label>
                            <span>Name</span>
                            <input id="edit-name" type="text" style="width:100%; max-width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; box-sizing:border-box; display:block;" />
                        </label>
                        <label>
                            <span>City</span>
                            <input id="edit-city" type="text" style="width:100%; max-width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; box-sizing:border-box; display:block;" />
                        </label>
                        <label>
                            <span>Country</span>
                            <input id="edit-country" type="text" style="width:100%; max-width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; box-sizing:border-box; display:block;" />
                        </label>
                    </div>
                    <div style="position:absolute; right:16px; bottom:16px; display:flex; gap:8px; justify-content:flex-end;">
                        <button id="save-profile-btn" class="btn" type="button">Save</button>
                    </div>
                </div>

                <!-- Privacy & Security panel -->
                <div id="settings-panel-privacy" style="display:none; flex:1; flex-direction:column; position:static;">
                    <h3 style="margin-top:0;">Privacy &amp; Security</h3>

                    <!-- Inline styles for slide toggle (scoped to this page) -->
                    <style>
                      .privacy-rows { display: flex; flex-direction: column; gap: 14px; margin-top: 8px; }
                      .privacy-caption { color: #6b7280; font-size: 14px; margin: 8px 0 4px; }
                      .privacy-row { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
                      .privacy-label { color: #111827; }
                      /* Switch */
                      .switch { position: relative; display: inline-block; width: 46px; height: 26px; }
                      .switch input { opacity: 0; width: 0; height: 0; }
                      .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #d1d5db; transition: .2s; border-radius: 26px; }
                      .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .2s; border-radius: 50%; box-shadow: 0 1px 2px rgba(0,0,0,0.2); }
                      input:checked + .slider { background-color: #111827; }
                      /* Remove focus outlines around the switch */
                      input:focus + .slider { box-shadow: none; }
                      .switch, .switch:focus, .switch:focus-visible { outline: none; }
                      .slider, .slider:focus, .slider:focus-visible { outline: none; box-shadow: none; }
                      .switch input:focus, .switch input:focus-visible { outline: none; }
                      input:checked + .slider:before { transform: translateX(20px); }
                    </style>

                    <div class="privacy-rows">
                        <div class="privacy-caption">For my public profile:</div>

                        <div class="privacy-row">
                            <span class="privacy-label">Show my Followers</span>
                            <label class="switch" aria-label="Show my Followers">
                                <input id="privacy-followers-visible" type="checkbox" />
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="privacy-row">
                            <span class="privacy-label">Show who I'm Following</span>
                            <label class="switch" aria-label="Show who I'm Following">
                                <input id="privacy-following-visible" type="checkbox" />
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="privacy-row">
                            <span class="privacy-label">Show my Gallery (uploaded artworks)</span>
                            <label class="switch" aria-label="Show my Gallery">
                                <input id="privacy-gallery-visible" type="checkbox" />
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="privacy-row">
                            <span class="privacy-label">Show my Collection (collected artworks)</span>
                            <label class="switch" aria-label="Show my Collection">
                                <input id="privacy-collection-visible" type="checkbox" />
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                </div>
                <!-- Dedicated bottom-right anchor for Privacy Save (shown only on Privacy panel) -->
                <div id="privacy-save-anchor" style="position:absolute; right:16px; bottom:16px; display:none; gap:8px; justify-content:flex-end;">
                    <button id="save-privacy-btn" class="btn" type="button">Save</button>
                </div>
            </section>
        </div>
    </div>

    <script src="js/account.js"></script>
</body>
</html>
